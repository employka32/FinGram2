<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">
    <title>üí∞ –î–µ–Ω–µ–∂–Ω—ã–π –î–æ–∂–¥—å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        #gameContainer {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 95%;
            overflow: hidden;
        }

        #gameHeader {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            color: white;
            text-align: center;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        #stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
        }

        #gameCanvas {
            display: block;
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 10; /* –∫–∞–Ω–≤–∞—Å –ù–ï –±—É–¥–µ—Ç –∏—Å–∫–∞–∂–∞—Ç—å—Å—è */
            background: linear-gradient(180deg, #e0f7fa 0%, #fff9c4 100%);
            cursor: none;
            touch-action: none; /* —Ñ–∏–∫—Å –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
        }


        #menuScreen, #levelScreen, #gameOverScreen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 90%;
            z-index: 10;
        }

        .hidden {
            display: none !important;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .difficulty-btn {
            display: block;
            width: 100%;
            margin: 10px 0;
        }

        .easy { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); }
        .medium { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        .hard { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); }

        #levelInfo {
            font-size: 1.5em;
            margin: 20px 0;
            color: #333;
        }

        .tip {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
            text-align: left;
        }

        #finalScore {
            font-size: 3em;
            color: #667eea;
            margin: 20px 0;
        }

        .rating {
            font-size: 1.5em;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .rating.guru { background: #d4edda; color: #155724; }
        .rating.master { background: #cfe2ff; color: #084298; }
        .rating.student { background: #fff3cd; color: #664d03; }
        .rating.newbie { background: #f8d7da; color: #842029; }

        @media (max-width: 600px) {
            h1 { font-size: 1.5em; }
            .stat { font-size: 0.9em; padding: 5px 10px; }
            #gameCanvas { height: 400px; }
            button { padding: 12px 20px; font-size: 1em; }
        }

        .emoji-icon {
            font-size: 2em;
            margin: 10px;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="gameHeader">
            <h1>üí∞ –î–µ–Ω–µ–∂–Ω—ã–π –î–æ–∂–¥—å üí∏</h1>
            <div id="stats">
                <div class="stat">üíµ –î–µ–Ω—å–≥–∏: <span id="money">0</span>‚ÇΩ</div>
                <div class="stat">‚≠ê –û—á–∫–∏: <span id="score">0</span></div>
                <div class="stat">‚ù§Ô∏è –ñ–∏–∑–Ω–∏: <span id="lives">3</span></div>
                <div class="stat">‚è±Ô∏è –í—Ä–µ–º—è: <span id="timer">90</span>—Å</div>
                <div class="stat">üìä –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
            </div>
        </div>
        
        <div style="position: relative;">
            <canvas id="gameCanvas" width="800" height="500"></canvas>
            
            <div id="menuScreen">
                <h2>üéÆ –î–µ–Ω–µ–∂–Ω—ã–π –î–æ–∂–¥—å</h2>
                <p style="margin: 20px 0;">–õ–æ–≤–∏ —Ö–æ—Ä–æ—à–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è, —É–∫–ª–æ–Ω—è–π—Å—è –æ—Ç –ø–ª–æ—Ö–∏—Ö!</p>
                <div class="emoji-icon">üí∞ üí≥ üí∏ üéØ</div>
                <h3>–í—ã–±–µ—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å:</h3>
                <button class="difficulty-btn easy" onclick="startGame('easy')">üòé –õ–µ–≥–∫–æ (–¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤)</button>
                <button class="difficulty-btn medium" onclick="startGame('medium')">ü§ì –°—Ä–µ–¥–Ω–µ (–¥–ª—è –∑–Ω–∞—é—â–∏—Ö)</button>
                <button class="difficulty-btn hard" onclick="startGame('hard')">üî• –°–ª–æ–∂–Ω–æ (–¥–ª—è –≥—É—Ä—É)</button>
            </div>

            <div id="levelScreen" class="hidden">
                <h2 id="levelTitle">–£—Ä–æ–≤–µ–Ω—å 1 –ø—Ä–æ–π–¥–µ–Ω! üéâ</h2>
                <div id="levelInfo"></div>
                <div class="tip" id="levelTip"></div>
                <button onclick="nextLevel()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å üöÄ</button>
            </div>

            <div id="gameOverScreen" class="hidden">
                <h2 id="gameOverTitle">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
                <div id="finalScore"></div>
                <div class="rating" id="rating"></div>
                <div id="finalStats" style="margin: 20px 0; text-align: left;"></div>
                <button onclick="location.reload()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞ üîÑ</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let gameState = {
            running: false,
            paused: false,
            money: 0,
            score: 0,
            lives: 3,
            level: 1,
            difficulty: 'medium',
            timer: 90,
            player: { x: 400, y: 450, width: 60, height: 60, speed: 8 },
            items: [],
            stats: { good: 0, bad: 0, missed: 0 }
        };

        const itemTypes = {
            good: [
                { emoji: 'üí∞', name: '–ó–∞—Ä–ø–ª–∞—Ç–∞', money: 100, score: 10, tip: '–°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥ ‚Äî –æ—Å–Ω–æ–≤–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏!' },
                { emoji: 'üí≥', name: '–ö—ç—à–±–µ–∫', money: 50, score: 8, tip: '–í–æ–∑–≤—Ä–∞—â–∞–π –¥–µ–Ω—å–≥–∏ –∑–∞ –ø–æ–∫—É–ø–∫–∏ ‚Äî —ç—Ç–æ —É–º–Ω–æ!' },
                { emoji: 'üè¶', name: '–í–∫–ª–∞–¥', money: 80, score: 12, tip: '–°–±–µ—Ä–µ–∂–µ–Ω–∏—è –ø–æ–¥ –ø—Ä–æ—Ü–µ–Ω—Ç ‚Äî —Ç–≤–æ–∏ –¥–µ–Ω—å–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç!' },
                { emoji: 'üíº', name: '–ü–æ–¥—Ä–∞–±–æ—Ç–∫–∞', money: 60, score: 9, tip: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç!' },
                { emoji: 'üìà', name: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è', money: 120, score: 15, tip: '–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π –≤ –±—É–¥—É—â–µ–µ, –Ω–æ —Å —É–º–æ–º!' },
                { emoji: 'üéì', name: '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ', money: 40, score: 20, tip: '–í–ª–æ–∂–µ–Ω–∏—è –≤ —Å–µ–±—è ‚Äî –ª—É—á—à–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è!' }
            ],
            bad: [
                { emoji: 'üí∏', name: '–ú–∏–∫—Ä–æ–∑–∞–π–º', money: -150, lives: -1, tip: '–ú–∏–∫—Ä–æ–∑–∞–π–º—ã = —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∫–∞–±–∞–ª–∞! –ò–∑–±–µ–≥–∞–π!' },
                { emoji: 'üé∞', name: '–ö–∞–∑–∏–Ω–æ', money: -200, lives: -1, tip: '–í –∫–∞–∑–∏–Ω–æ –≤—Å–µ–≥–¥–∞ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∑–∏–Ω–æ!' },
                { emoji: 'üõçÔ∏è', name: '–ò–º–ø—É–ª—å—Å–∏–≤–Ω–∞—è –ø–æ–∫—É–ø–∫–∞', money: -80, lives: -1, tip: '–ü–æ–∫—É–ø–∫–∏ –Ω–∞ —ç–º–æ—Ü–∏—è—Ö —Ä–∞–∑–æ—Ä—è—é—Ç –±—ã—Å—Ç—Ä–µ–µ –∫—Ä–µ–¥–∏—Ç–æ–≤!' },
                { emoji: 'üì±', name: '–ü–æ–¥–ø–∏—Å–∫–∞', money: -30, lives: -1, tip: '–ù–µ–∑–∞–º–µ—Ç–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å—ä–µ–¥–∞—é—Ç –±—é–¥–∂–µ—Ç!' },
                { emoji: '‚ö†Ô∏è', name: '–®—Ç—Ä–∞—Ñ', money: -100, lives: -1, tip: '–®—Ç—Ä–∞—Ñ—ã ‚Äî —ç—Ç–æ –Ω–∞–ª–æ–≥ –Ω–∞ –Ω–µ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!' },
                { emoji: 'üö¨', name: '–í—Ä–µ–¥–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∞', money: -70, lives: -1, tip: '–í—Ä–µ–¥–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –¥–æ—Ä–æ–≥–æ –æ–±—Ö–æ–¥—è—Ç—Å—è!' }
            ]
        };

        const levelTips = [
            { title: '–£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ üìö', tip: '–û—Ç–ª–∏—á–Ω–æ! –¢—ã –∑–Ω–∞–µ—à—å –æ—Å–Ω–æ–≤—ã: –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π, –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π, –Ω–µ –≤–ª–µ–∑–∞–π –≤ –¥–æ–ª–≥–∏. –≠—Ç–æ –±–∞–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏!' },
            { title: '–£—Ä–æ–≤–µ–Ω—å 2: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å üéØ', tip: '–ö—Ä—É—Ç–æ! –¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ –∏ –ø–∞—Å—Å–∏–≤–∞–º–∏. –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!' },
            { title: '–£—Ä–æ–≤–µ–Ω—å 3: –ú–∞—Å—Ç–µ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤ üëë', tip: '–õ–µ–≥–µ–Ω–¥–∞! –¢—ã —É–ø—Ä–∞–≤–ª—è–µ—à—å –¥–µ–Ω—å–≥–∞–º–∏ –∫–∞–∫ –ø—Ä–æ—Ñ–∏. –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ ‚Äî —Ç–≤–æ–∏ –∫–æ–∑—ã—Ä–∏!' }
        ];

        const sounds = {
            coin: () => playTone(800, 0.1, 'sine'),
            error: () => playTone(200, 0.2, 'sawtooth'),
            win: () => { playTone(600, 0.1, 'sine'); setTimeout(() => playTone(800, 0.15, 'sine'), 100); },
            lose: () => { playTone(400, 0.2, 'sawtooth'); setTimeout(() => playTone(200, 0.3, 'sawtooth'), 150); }
        };

        function playTone(freq, duration, type = 'sine') {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.value = freq;
                osc.type = type;
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
                osc.start(audioCtx.currentTime);
                osc.stop(audioCtx.currentTime + duration);
            } catch(e) {}
        }

        function startGame(difficulty) {
            gameState.difficulty = difficulty;
            gameState.running = true;
            gameState.money = 0;
            gameState.score = 0;
            gameState.lives = 3;
            gameState.level = 1;
            gameState.timer = 90;
            gameState.items = [];
            gameState.stats = { good: 0, bad: 0, missed: 0 };
            
            document.getElementById('menuScreen').classList.add('hidden');
            updateUI();
            gameLoop();
            startTimer();
            spawnItem();
        }

        function startTimer() {
            const timerInterval = setInterval(() => {
                if (gameState.running && !gameState.paused) {
                    gameState.timer--;
                    document.getElementById('timer').textContent = gameState.timer;
                    
                    if (gameState.timer <= 0) {
                        clearInterval(timerInterval);
                        if (gameState.level < 3) {
                            levelComplete();
                        } else {
                            gameOver(true);
                        }
                    }
                }
            }, 1000);
        }

        function spawnItem() {
            if (!gameState.running || gameState.paused) return;

            const speedMultiplier = { easy: 1, medium: 1.3, hard: 1.7 }[gameState.difficulty];
            const spawnRate = { easy: 1500, medium: 1200, hard: 900 }[gameState.difficulty];

            // üé≤ –°–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–¥–∞—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (1‚Äì6)
            const count = Math.floor(Math.random() * 6) + 1;

            for (let i = 0; i < count; i++) {
                const isGood = Math.random() > 0.4;
                const typeArray = isGood ? itemTypes.good : itemTypes.bad;
                const type = typeArray[Math.floor(Math.random() * typeArray.length)];

                gameState.items.push({
                    x: Math.random() * (canvas.width - 40) + 20,
                    y: -40,
                    speed: (2 + Math.random() * 2) * speedMultiplier * gameState.level,
                    type: type,
                    isGood: isGood,
                    size: 35
                });
            }

            // –ø–æ–≤—Ç–æ—Ä—è–µ–º —Å–ø–∞–≤–Ω
            setTimeout(spawnItem, spawnRate / gameState.level);
        }



        function updateUI() {
            document.getElementById('money').textContent = gameState.money;
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('lives').textContent = gameState.lives;
            document.getElementById('level').textContent = gameState.level;
        }

        function drawPlayer() {
            ctx.font = '50px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('üß∫', gameState.player.x, gameState.player.y);
        }

        function drawItems() {
            gameState.items.forEach(item => {
                ctx.font = `${item.size}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                if (!item.isGood) {
                    ctx.shadowColor = 'red';
                    ctx.shadowBlur = 10;
                }
                
                ctx.fillText(item.type.emoji, item.x, item.y);
                ctx.shadowBlur = 0;
            });
        }

        function checkCollisions() {
            gameState.items = gameState.items.filter(item => {
                if (Math.abs(item.x - gameState.player.x) < 40 && 
                    Math.abs(item.y - gameState.player.y) < 40) {
                    
                    if (item.isGood) {
                        gameState.money += item.type.money || 0;
                        gameState.score += item.type.score || 0;
                        gameState.stats.good++;
                        sounds.coin();
                    } else {
                        gameState.money += item.type.money || 0;
                        gameState.lives += item.type.lives || 0;
                        gameState.stats.bad++;
                        sounds.error();
                        
                        if (gameState.lives <= 0) {
                            gameOver(false);
                        }
                    }
                    
                    updateUI();
                    return false;
                }
                
                if (item.y > canvas.height) {
                    if (item.isGood) gameState.stats.missed++;
                    return false;
                }
                
                return true;
            });
        }

        function gameLoop() {
            if (!gameState.running) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            gameState.items.forEach(item => item.y += item.speed);
            
            drawItems();
            drawPlayer();
            checkCollisions();
            
            requestAnimationFrame(gameLoop);
        }

        function levelComplete() {
            gameState.paused = true;
            const levelScreen = document.getElementById('levelScreen');
            const levelData = levelTips[gameState.level - 1];
            
            document.getElementById('levelTitle').textContent = `${levelData.title} –ø—Ä–æ–π–¥–µ–Ω! üéâ`;
            document.getElementById('levelInfo').innerHTML = `
                <p>üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${gameState.money}‚ÇΩ</p>
                <p>‚≠ê –û—á–∫–æ–≤: ${gameState.score}</p>
                <p>‚úÖ –ü–æ–π–º–∞–Ω–æ —Ö–æ—Ä–æ—à–∏—Ö: ${gameState.stats.good}</p>
                <p>‚ùå –ü–æ–ø–∞–ª–æ—Å—å –ø–ª–æ—Ö–∏—Ö: ${gameState.stats.bad}</p>
            `;
            document.getElementById('levelTip').textContent = levelData.tip;
            
            levelScreen.classList.remove('hidden');
            sounds.win();
        }

        function nextLevel() {
            gameState.level++;
            gameState.timer = 90;
            gameState.paused = false;
            gameState.items = [];
            gameState.stats = { good: 0, bad: 0, missed: 0 };
            
            document.getElementById('levelScreen').classList.add('hidden');
            updateUI();
            startTimer();
        }

        function gameOver(win) {
            gameState.running = false;
            const screen = document.getElementById('gameOverScreen');
            
            let rating, ratingClass;
            if (gameState.score >= 400) {
                rating = 'üèÜ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ì—É—Ä—É - —Ç—ã –ª–µ–≥–µ–Ω–¥–∞!';
                ratingClass = 'guru';
            } else if (gameState.score >= 250) {
                rating = '‚≠ê –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ú–∞—Å—Ç–µ—Ä - –æ—Ç–ª–∏—á–Ω–æ!';
                ratingClass = 'master';
            } else if (gameState.score >= 100) {
                rating = 'üìö –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –°—Ç—É–¥–µ–Ω—Ç - –Ω–µ–ø–ª–æ—Ö–æ!';
                ratingClass = 'student';
            } else {
                rating = 'üí∏ –î–æ–ª–≥–æ–≤–∞—è –Ø–º–∞ - —É—á–∏—Å—å –¥–∞–ª—å—à–µ!';
                ratingClass = 'newbie';
            }
            
            document.getElementById('gameOverTitle').textContent = win ? 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : 'üò¢ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!';
            document.getElementById('finalScore').textContent = `${gameState.score} –æ—á–∫–æ–≤`;
            document.getElementById('rating').textContent = rating;
            document.getElementById('rating').className = `rating ${ratingClass}`;
            
            document.getElementById('finalStats').innerHTML = `
                <p><strong>üí∞ –ò—Ç–æ–≥–æ –¥–µ–Ω–µ–≥:</strong> ${gameState.money}‚ÇΩ</p>
                <p><strong>üìä –î–æ—Å—Ç–∏–≥–Ω—É—Ç —É—Ä–æ–≤–µ–Ω—å:</strong> ${gameState.level}</p>
                <p><strong>‚úÖ –•–æ—Ä–æ—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π:</strong> ${gameState.stats.good}</p>
                <p><strong>‚ùå –ü–ª–æ—Ö–∏—Ö —Ä–µ—à–µ–Ω–∏–π:</strong> ${gameState.stats.bad}</p>
                <p><strong>üéØ –¢–æ—á–Ω–æ—Å—Ç—å:</strong> ${gameState.stats.good > 0 ? Math.round(gameState.stats.good / (gameState.stats.good + gameState.stats.bad) * 100) : 0}%</p>
            `;
            
            screen.classList.remove('hidden');
            win ? sounds.win() : sounds.lose();
        }

        function movePlayer(clientX) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            gameState.player.x = (clientX - rect.left) * scaleX;
        }

        canvas.addEventListener('mousemove', e => {
            if (!gameState.running || gameState.paused) return;
            movePlayer(e.clientX);
        });

        canvas.addEventListener('touchmove', e => {
            if (!gameState.running || gameState.paused) return;
            e.preventDefault();
            movePlayer(e.touches[0].clientX);
        }, { passive: false });


    </script>
</body>
</html>

